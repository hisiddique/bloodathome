import{c as Ee,a as Te,j as d}from"./app-DKMZLzfm.js";import{r as V}from"./stripe-DEhpSmJl.js";import{a as Re}from"./button-BpuFCFGL.js";import{c as Ve,b as Ae,C as Be,a as Ie,P as qe}from"./popover-zwJGBpQI.js";import{C as je}from"./x-CVwgNE2J.js";import{f as _e,i as Ke}from"./format-BqGRHkU_.js";function Fe(r,e,i){return Ve(r,-e,i)}function Le(r){switch(r){case"MM/DD/YYYY":return{mask:"MM/DD/YYYY",separator:"/",separatorPositions:[2,5],digitToMaskPositions:[0,1,3,4,6,7,8,9],parseOrder:{month:0,day:1,year:2},formatFn:"MM/dd/yyyy"};case"YYYY-MM-DD":return{mask:"YYYY-MM-DD",separator:"-",separatorPositions:[4,7],digitToMaskPositions:[0,1,2,3,5,6,8,9],parseOrder:{year:0,month:1,day:2},formatFn:"yyyy-MM-dd"};case"DD/MM/YYYY":default:return{mask:"DD/MM/YYYY",separator:"/",separatorPositions:[2,5],digitToMaskPositions:[0,1,3,4,6,7,8,9],parseOrder:{day:0,month:1,year:2},formatFn:"dd/MM/yyyy"}}}function we(r,e){const i=e.mask.split("");for(let n=0;n<r.length&&n<8;n++)i[e.digitToMaskPositions[n]]=r[n];return i.join("")}function fe(r,e){return r===0?0:e.digitToMaskPositions[r-1]+1}function Ne(r,e){const i=e.separator.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=new RegExp(`^(\\d{2,4})${i}(\\d{2})${i}(\\d{2,4})$`),L=r.match(n);if(!L)return;const[,w,A,B]=L,I=[w,A,B],P=Number(I[e.parseOrder.day]),f=Number(I[e.parseOrder.month]),C=Number(I[e.parseOrder.year]),y=new Date(C,f-1,P);if(!(y.getDate()!==P||y.getMonth()!==f-1||y.getFullYear()!==C))return Ke(y)?y:void 0}function Ze(r){const e=Ee.c(100),{name:i,value:n,defaultValue:L,onChange:w,maxDate:A,minDate:B,placeholder:I,id:P,disabled:f,required:C,className:y,variant:Pe}=r,h=Pe===void 0?"default":Pe,{settings:b}=Te().props;let H;e[0]!==b.date_format?(H=Le(b.date_format),e[0]=b.date_format,e[1]=H):H=e[1];const s=H,ue=I??s.mask,g=h==="dob"||h==="dob-adult";let z;e[2]!==A||e[3]!==h?(z=A??(h==="dob-adult"?Fe(new Date,18):h==="dob"?new Date:void 0),e[2]=A,e[3]=h,e[4]=z):z=e[4];const l=z;let G;e[5]!==g||e[6]!==B?(G=B??(g?Fe(new Date,100):void 0),e[5]=g,e[6]=B,e[7]=G):G=e[7];const c=G,Ce=ze,k=n!==void 0,pe=k?n:L;let u,q,J;if(e[8]!==b.date_format||e[9]!==pe){q=Ce(pe);let t;e[13]!==b.date_format?(t=o=>{if(!o)return"";const m=String(o.getDate()).padStart(2,"0"),v=String(o.getMonth()+1).padStart(2,"0"),ke=String(o.getFullYear());switch(b.date_format){case"MM/DD/YYYY":return v+m+ke;case"YYYY-MM-DD":return ke+v+m;case"DD/MM/YYYY":default:return m+v+ke}},e[13]=b.date_format,e[14]=t):t=e[14],u=t,J=u(q),e[8]=b.date_format,e[9]=pe,e[10]=u,e[11]=q,e[12]=J}else u=e[10],q=e[11],J=e[12];const Oe=J,[a,K]=V.useState(Oe),[p,D]=V.useState(q),[me,ye]=V.useState(!1),[Q,M]=V.useState(null),Se=V.useRef(null);let U;e[15]!==a||e[16]!==s?(U=a.length>0?we(a,s):"",e[15]=a,e[16]=s,e[17]=U):U=e[17];const he=U;let W;e[18]!==u||e[19]!==k||e[20]!==n?(W=()=>{if(k){const t=Ce(n);D(t),K(u(t))}},e[18]=u,e[19]=k,e[20]=n,e[21]=W):W=e[21];let X;e[22]!==k||e[23]!==n?(X=[n,k],e[22]=k,e[23]=n,e[24]=X):X=e[24],V.useEffect(W,X);let Z;e[25]===Symbol.for("react.memo_cache_sentinel")?(Z=t=>{requestAnimationFrame(()=>{Se.current?.setSelectionRange(t,t)})},e[25]=Z):Z=e[25];const ee=Z;let te;e[26]!==u||e[27]!==w||e[28]!==l||e[29]!==c||e[30]!==h?(te=t=>l&&t>l?(M(h==="dob-adult"?"You must be at least 18 years old.":"Date is too far in the future."),D(void 0),!1):c&&t<c?(M("Date is too far in the past."),D(void 0),!1):(M(null),D(t),K(u(t)),w&&w(_e(t,"yyyy-MM-dd")),!0),e[26]=u,e[27]=w,e[28]=l,e[29]=c,e[30]=h,e[31]=te):te=e[31];const Y=te;let se;e[32]!==Y?(se=t=>{t&&(Y(t),ye(!1))},e[32]=Y,e[33]=se):se=e[33];const ge=se;let ae;e[34]!==Y||e[35]!==a||e[36]!==s?(ae=t=>{if(t.key==="Tab"||t.key==="Escape")return;if(t.key==="Backspace"){if(t.preventDefault(),a.length>0){const m=a.slice(0,-1);K(m),M(null),D(void 0),ee(fe(m.length,s))}return}if(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="Home"||t.key==="End"||(t.preventDefault(),!/^\d$/.test(t.key))||a.length>=8)return;const o=a+t.key;if(K(o),M(null),ee(fe(o.length,s)),o.length===8){const m=we(o,s),v=Ne(m,s);v?Y(v):(M("Invalid date."),D(void 0))}else D(void 0)},e[34]=Y,e[35]=a,e[36]=s,e[37]=ae):ae=e[37];const De=ae;let re;e[38]!==Y||e[39]!==s?(re=t=>{t.preventDefault();const o=t.clipboardData.getData("text").replace(/\D/g,"").slice(0,8);if(o)if(K(o),M(null),ee(fe(o.length,s)),o.length===8){const m=we(o,s),v=Ne(m,s);v?Y(v):(M("Invalid date."),D(void 0))}else D(void 0)},e[38]=Y,e[39]=s,e[40]=re):re=e[40];const Me=re;let ne;e[41]!==a.length||e[42]!==s?(ne=()=>{ye(!0),ee(fe(a.length,s))},e[41]=a.length,e[42]=s,e[43]=ne):ne=e[43];const Ye=ne;let oe;e[44]!==a.length||e[45]!==s?(oe=()=>{a.length>0&&a.length<8&&M(`Please enter a complete date (${s.mask}).`)},e[44]=a.length,e[45]=s,e[46]=oe):oe=e[46];const ve=oe,$e=He;let x;e[47]!==l||e[48]!==c?(x={},l&&(x.after=l),c&&(x.before=c),e[47]=l,e[48]=c,e[49]=x):x=e[49];let le;e[50]!==p?(le=p?_e(p,"yyyy-MM-dd"):"",e[50]=p,e[51]=le):le=e[51];const be=le;let ie;e[52]===Symbol.for("react.memo_cache_sentinel")?(ie=d.jsx(je,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground pointer-events-none"}),e[52]=ie):ie=e[52];const xe=f&&"cursor-not-allowed opacity-50";let S;e[53]!==y||e[54]!==xe?(S=Re("w-full pl-12 pr-12 py-4 bg-card border border-border rounded-2xl text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary",xe,y),e[53]=y,e[54]=xe,e[55]=S):S=e[55];let j;e[56]!==f||e[57]!==he||e[58]!==ve||e[59]!==Ye||e[60]!==De||e[61]!==Me||e[62]!==P||e[63]!==ue||e[64]!==S?(j=d.jsx("input",{ref:Se,id:P,type:"text",inputMode:"numeric",value:he,onChange:$e,onKeyDown:De,onPaste:Me,onFocus:Ye,onBlur:ve,placeholder:ue,disabled:f,autoComplete:"off",className:S}),e[56]=f,e[57]=he,e[58]=ve,e[59]=Ye,e[60]=De,e[61]=Me,e[62]=P,e[63]=ue,e[64]=S,e[65]=j):j=e[65];let de;e[66]===Symbol.for("react.memo_cache_sentinel")?(de=d.jsx(je,{className:"h-5 w-5"}),e[66]=de):de=e[66];let _;e[67]!==f?(_=d.jsx(Ie,{asChild:!0,children:d.jsx("button",{type:"button",disabled:f,className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors","aria-label":"Open calendar",children:de})}),e[67]=f,e[68]=_):_=e[68];let F;e[69]!==g||e[70]!==l||e[71]!==p?(F=p??(g?new Date(2e3,0):l),e[69]=g,e[70]=l,e[71]=p,e[72]=F):F=e[72];let N;e[73]!==g||e[74]!==l||e[75]!==c?(N=g&&{captionLayout:"dropdown",startMonth:c,endMonth:l},e[73]=g,e[74]=l,e[75]=c,e[76]=N):N=e[76];let O;e[77]!==x||e[78]!==ge||e[79]!==p||e[80]!==F||e[81]!==N?(O=d.jsx(Ae,{className:"w-auto p-0",align:"end",children:d.jsx(Be,{mode:"single",selected:p,onSelect:ge,disabled:x,defaultMonth:F,...N,initialFocus:!0})}),e[77]=x,e[78]=ge,e[79]=p,e[80]=F,e[81]=N,e[82]=O):O=e[82];let $;e[83]!==me||e[84]!==_||e[85]!==O?($=d.jsxs(qe,{open:me,onOpenChange:ye,children:[_,O]}),e[83]=me,e[84]=_,e[85]=O,e[86]=$):$=e[86];let E;e[87]!==j||e[88]!==$?(E=d.jsxs("div",{className:"relative",children:[ie,j,$]}),e[87]=j,e[88]=$,e[89]=E):E=e[89];let T;e[90]!==Q?(T=Q&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:Q}),e[90]=Q,e[91]=T):T=e[91];let R;e[92]!==be||e[93]!==i||e[94]!==C?(R=i&&d.jsx("input",{type:"hidden",name:i,value:be,required:C}),e[92]=be,e[93]=i,e[94]=C,e[95]=R):R=e[95];let ce;return e[96]!==E||e[97]!==T||e[98]!==R?(ce=d.jsxs("div",{children:[E,T,R]}),e[96]=E,e[97]=T,e[98]=R,e[99]=ce):ce=e[99],ce}function He(){}function ze(r){if(r)return new Date(r+"T00:00:00")}export{Ze as D};
