import{c as z,j as s,H as A,L as H}from"./app-DKMZLzfm.js";import{r as N,E as B,l as R,u as $,b as I,P as O}from"./stripe-DEhpSmJl.js";import{H as T}from"./heading-small-CjPJGBP7.js";import{B as C}from"./button-BpuFCFGL.js";import{A as F}from"./app-layout-mDgHwkxe.js";import{L as D}from"./loader-circle-C-jBiGq1.js";import{S as Y}from"./shield-check-CXP3ZXnK.js";/* empty css            */import"./mapbox-fioGkFd4.js";import"./sheet-COscS31w.js";import"./x-CVwgNE2J.js";import"./index--92RBgGL.js";import"./index-B_ybs1te.js";import"./index-Cns2SMks.js";import"./index-CO8lL1Hs.js";import"./index-DAEGULsz.js";import"./index-CMWG4mbA.js";import"./clock-Br7JvzSP.js";import"./map-pin-6HZ9aDy_.js";import"./message-circle-BH8WnjW2.js";let E=null,L="";function q(t){return E&&L===t||(L=t,E=R(t)),E}const w=[{title:"Payment Methods",href:"/payment-methods"},{title:"Add Payment Method",href:"/payment-methods/create"}];function G(){const t=z.c(22),e=$(),c=I(),[o,y]=N.useState(!1),[m,f]=N.useState(null);let _;t[0]!==c||t[1]!==e?(_=async P=>{if(P.preventDefault(),!e||!c)return;y(!0),f(null);const{error:j}=await e.confirmSetup({elements:c,confirmParams:{return_url:`${window.location.origin}/payment-methods/setup-complete`}});j&&f(j.message||"Failed to save card. Please try again."),y(!1)},t[0]=c,t[1]=e,t[2]=_):_=t[2];const u=_;let d;t[3]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(O,{}),t[3]=d):d=t[3];let l;t[4]!==m?(l=m&&s.jsx("p",{className:"text-sm text-destructive",children:m}),t[4]=m,t[5]=l):l=t[5];const b=!e||o;let a;t[6]!==o?(a=o?s.jsxs(s.Fragment,{children:[s.jsx(D,{className:"mr-2 size-4 animate-spin"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Y,{className:"mr-2 size-4"}),"Save Card"]}),t[6]=o,t[7]=a):a=t[7];let n;t[8]!==b||t[9]!==a?(n=s.jsx(C,{type:"submit",disabled:b,className:"flex-1",size:"lg",children:a}),t[8]=b,t[9]=a,t[10]=n):n=t[10];let h;t[11]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsx(H,{href:"/payment-methods",children:"Cancel"}),t[11]=h):h=t[11];let r;t[12]!==o?(r=s.jsx(C,{type:"button",variant:"outline",size:"lg",asChild:!0,disabled:o,children:h}),t[12]=o,t[13]=r):r=t[13];let i;t[14]!==n||t[15]!==r?(i=s.jsxs("div",{className:"flex gap-3",children:[n,r]}),t[14]=n,t[15]=r,t[16]=i):i=t[16];let p;t[17]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"Your payment details are secured by Stripe."}),t[17]=p):p=t[17];let x;return t[18]!==u||t[19]!==l||t[20]!==i?(x=s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[d,l,i,p]}),t[18]=u,t[19]=l,t[20]=i,t[21]=x):x=t[21],x}function de(t){const e=z.c(24),{clientSecret:c,stripePublicKey:o}=t;let y;e[0]!==o?(y=o?q(o):null,e[0]=o,e[1]=y):y=e[1];const m=y,[f,_]=N.useState(!1);let u,d;if(e[2]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{const S=()=>{_(document.documentElement.classList.contains("dark"))};S();const g=new MutationObserver(S);return g.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>g.disconnect()},d=[],e[2]=u,e[3]=d):(u=e[2],d=e[3]),N.useEffect(u,d),!m||!c){let S;e[4]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(A,{title:"Add Payment Method"}),e[4]=S):S=e[4];let g;return e[5]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsxs(F,{breadcrumbs:w,children:[S,s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(D,{className:"size-6 animate-spin text-primary"})})]}),e[5]=g):g=e[5],g}const l=f?"night":"stripe",b=f?"#3b82f6":"#0570de",a=f?"#1f2937":"#ffffff",n=f?"#f3f4f6":"#1f2937",h=f?"#ef4444":"#df1b41";let r;e[6]!==b||e[7]!==a||e[8]!==n||e[9]!==h?(r={colorPrimary:b,colorBackground:a,colorText:n,colorDanger:h,fontFamily:"system-ui, sans-serif",borderRadius:"0.75rem"},e[6]=b,e[7]=a,e[8]=n,e[9]=h,e[10]=r):r=e[10];let i;e[11]!==l||e[12]!==r?(i={theme:l,variables:r},e[11]=l,e[12]=r,e[13]=i):i=e[13];let p;e[14]!==c||e[15]!==i?(p={clientSecret:c,appearance:i},e[14]=c,e[15]=i,e[16]=p):p=e[16];const x=p;let P;e[17]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(A,{title:"Add Payment Method"}),e[17]=P):P=e[17];let j;e[18]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx(T,{title:"Add Payment Method",description:"Add a credit or debit card to your account"}),e[18]=j):j=e[18];const k=f?"dark":"light";let v;e[19]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(G,{}),e[19]=v):v=e[19];let M;return e[20]!==x||e[21]!==m||e[22]!==k?(M=s.jsxs(F,{breadcrumbs:w,children:[P,s.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto p-4",children:s.jsxs("div",{className:"space-y-6",children:[j,s.jsx(B,{stripe:m,options:x,children:v},k)]})})]}),e[20]=x,e[21]=m,e[22]=k,e[23]=M):M=e[23],M}export{de as default};
