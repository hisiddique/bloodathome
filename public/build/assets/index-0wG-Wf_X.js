import{c as te,j as e,L as I,r as Y,H as ae}from"./app-DKMZLzfm.js";import{B as q}from"./badge-0S-twSfP.js";import{B as c}from"./button-BpuFCFGL.js";import{C as g,a as P,b as G,c as J,d as le}from"./card-Ct3FmLMH.js";import{D as K}from"./date-picker-Dmn_kWQ3.js";import{L as R}from"./label-CLkqaWUk.js";import{a as re,b as ie,c as ce,d as v,S as ne}from"./select-CiS82dEB.js";import{T as de,a as oe,b as O,c as n,d as me,e as d}from"./table-BER-fNMN.js";import{A as xe}from"./app-layout-mDgHwkxe.js";import{r as E}from"./stripe-DEhpSmJl.js";import{C as Q}from"./x-CVwgNE2J.js";import{C as U}from"./chevron-left-v9wYfmOk.js";import{C as W}from"./index--92RBgGL.js";import{C as he}from"./clock-Br7JvzSP.js";import{M as pe}from"./map-pin-6HZ9aDy_.js";import{S as fe}from"./search-CYN13Cpu.js";import{f as X}from"./format-BqGRHkU_.js";/* empty css            */import"./mapbox-fioGkFd4.js";import"./popover-zwJGBpQI.js";import"./isSameDay-IV5ClnVe.js";import"./sheet-COscS31w.js";import"./index-BdQq_4o_.js";import"./index-CO8lL1Hs.js";import"./index-b6iZoh8X.js";import"./index-Cns2SMks.js";import"./chevron-down-Ob_WsXKC.js";import"./check-DDIrKLVA.js";import"./chevron-up-BgviQ73B.js";import"./index-DAEGULsz.js";import"./index-CMWG4mbA.js";import"./message-circle-BH8WnjW2.js";import"./index-B_ybs1te.js";const je=[{title:"My Bookings",href:"/books"}];function Ye(o){const s=te.c(40),{bookings:t,filters:N}=o;let _;s[0]!==N?(_=N===void 0?{}:N,s[0]=N,s[1]=_):_=s[1];const L=_,[l,Z]=E.useState(L.status||"all"),[r,ee]=E.useState(L.date_from||""),[i,se]=E.useState(L.date_to||"");let y;s[2]!==t?.data?(y=t?.data||[],s[2]=t?.data,s[3]=y):y=s[3];const u=y,V=u.length>0;let b;s[4]!==r||s[5]!==i||s[6]!==l?(b=()=>{Y.get("/books",{status:l!=="all"?l:void 0,date_from:r||void 0,date_to:i||void 0},{preserveState:!0})},s[4]=r,s[5]=i,s[6]=l,s[7]=b):b=s[7];const H=b,C=ge,$=ue;let S;s[8]===Symbol.for("react.memo_cache_sentinel")?(S=e.jsx(ae,{title:"My Bookings"}),s[8]=S):S=s[8];let w;s[9]===Symbol.for("react.memo_cache_sentinel")?(w=e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Bookings"}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage your appointments"})]}),s[9]=w):w=s[9];let F;s[10]===Symbol.for("react.memo_cache_sentinel")?(F=e.jsxs(le,{children:[e.jsx(G,{children:"Filter Bookings"}),e.jsx(J,{children:"Filter your bookings by status and date range"})]}),s[10]=F):F=s[10];let T;s[11]===Symbol.for("react.memo_cache_sentinel")?(T=e.jsx(R,{htmlFor:"status",children:"Status"}),s[11]=T):T=s[11];let z;s[12]===Symbol.for("react.memo_cache_sentinel")?(z=e.jsx(re,{id:"status",children:e.jsx(ie,{placeholder:"All statuses"})}),s[12]=z):z=s[12];let B;s[13]===Symbol.for("react.memo_cache_sentinel")?(B=e.jsxs(ce,{children:[e.jsx(v,{value:"all",children:"All Statuses"}),e.jsx(v,{value:"pending",children:"Pending"}),e.jsx(v,{value:"confirmed",children:"Confirmed"}),e.jsx(v,{value:"completed",children:"Completed"}),e.jsx(v,{value:"cancelled",children:"Cancelled"})]}),s[13]=B):B=s[13];let m;s[14]!==l?(m=e.jsxs("div",{className:"grid gap-2",children:[T,e.jsxs(ne,{value:l,onValueChange:Z,children:[z,B]})]}),s[14]=l,s[15]=m):m=s[15];let D;s[16]===Symbol.for("react.memo_cache_sentinel")?(D=e.jsx(R,{htmlFor:"date_from",children:"From Date"}),s[16]=D):D=s[16];let x;s[17]!==r?(x=e.jsxs("div",{className:"grid gap-2",children:[D,e.jsx(K,{id:"date_from",value:r,onChange:ee,placeholder:"From date"})]}),s[17]=r,s[18]=x):x=s[18];let M;s[19]===Symbol.for("react.memo_cache_sentinel")?(M=e.jsx(R,{htmlFor:"date_to",children:"To Date"}),s[19]=M):M=s[19];let h;s[20]!==i?(h=e.jsxs("div",{className:"grid gap-2",children:[M,e.jsx(K,{id:"date_to",value:i,onChange:se,placeholder:"To date"})]}),s[20]=i,s[21]=h):h=s[21];let k;s[22]===Symbol.for("react.memo_cache_sentinel")?(k=e.jsx(fe,{className:"mr-2 size-4"}),s[22]=k):k=s[22];let p;s[23]!==H?(p=e.jsx("div",{className:"flex items-end",children:e.jsxs(c,{onClick:H,className:"w-full",children:[k,"Apply Filters"]})}),s[23]=H,s[24]=p):p=s[24];let f;s[25]!==m||s[26]!==x||s[27]!==h||s[28]!==p?(f=e.jsxs(g,{children:[F,e.jsx(P,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[m,x,h,p]})})]}),s[25]=m,s[26]=x,s[27]=h,s[28]=p,s[29]=f):f=s[29];let j;s[30]!==u||s[31]!==t||s[32]!==r||s[33]!==i||s[34]!==V||s[35]!==l?(j=V?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block",children:e.jsxs(g,{children:[e.jsxs(de,{children:[e.jsx(oe,{children:e.jsxs(O,{children:[e.jsx(n,{children:"Phlebotomist"}),e.jsx(n,{children:"Date"}),e.jsx(n,{children:"Time"}),e.jsx(n,{children:"Address"}),e.jsx(n,{children:"Amount"}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"Actions"})]})}),e.jsx(me,{children:u.map(a=>e.jsxs(O,{children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:a.phlebotomist_image||"/placeholder.svg",alt:a.phlebotomist_name,className:"size-10 rounded-full object-cover"}),e.jsx("span",{className:"font-medium",children:a.phlebotomist_name})]})}),e.jsx(d,{children:X(new Date(a.appointment_date),"MMM d, yyyy")}),e.jsx(d,{children:a.time_slot}),e.jsx(d,{className:"max-w-[200px] truncate",children:a.address}),e.jsxs(d,{children:["£",a.total_amount.toFixed(2)]}),e.jsx(d,{children:e.jsx(q,{variant:$(a.status),children:a.status})}),e.jsx(d,{children:e.jsx(I,{href:`/books/${a.id}`,children:e.jsx(c,{variant:"outline",size:"sm",children:"View"})})})]},a.id))})]}),t&&t.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between border-t px-4 py-3",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(t.current_page-1)*t.per_page+1," to"," ",Math.min(t.current_page*t.per_page,t.total)," of"," ",t.total," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>C(t.links[0]?.url),disabled:t.current_page===1,children:[e.jsx(U,{className:"h-4 w-4"}),"Previous"]}),e.jsxs("div",{className:"text-sm",children:["Page ",t.current_page," of ",t.last_page]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>C(t.links[t.links.length-1]?.url),disabled:t.current_page===t.last_page,children:["Next",e.jsx(W,{className:"h-4 w-4"})]})]})]})]})}),e.jsxs("div",{className:"space-y-4 lg:hidden",children:[u.map(a=>e.jsx(g,{children:e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:a.phlebotomist_image||"/placeholder.svg",alt:a.phlebotomist_name,className:"size-14 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:a.phlebotomist_name}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"size-4"}),X(new Date(a.appointment_date),"MMM d, yyyy")]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(he,{className:"size-4"}),a.time_slot]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pe,{className:"size-4"}),a.address]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx(q,{variant:$(a.status),children:a.status}),e.jsxs("span",{className:"font-semibold",children:["£",a.total_amount.toFixed(2)]})]}),e.jsx(I,{href:`/books/${a.id}`,className:"mt-3 block",children:e.jsx(c,{variant:"outline",size:"sm",className:"w-full",children:"View Details"})})]})]})})},a.id)),t&&t.last_page>1&&e.jsx(g,{children:e.jsxs(P,{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",t.current_page," of ",t.last_page]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>C(t.links[0]?.url),disabled:t.current_page===1,children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>C(t.links[t.links.length-1]?.url),disabled:t.current_page===t.last_page,children:e.jsx(W,{className:"h-4 w-4"})})]})]})})]})]}):e.jsx(g,{children:e.jsxs(P,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Q,{className:"mb-4 size-16 text-muted-foreground"}),e.jsx(G,{className:"mb-2",children:"No bookings found"}),e.jsx(J,{children:l!=="all"||r||i?"Try adjusting your filters":"Book your first appointment to get started"})]})}),s[30]=u,s[31]=t,s[32]=r,s[33]=i,s[34]=V,s[35]=l,s[36]=j):j=s[36];let A;return s[37]!==f||s[38]!==j?(A=e.jsxs(xe,{breadcrumbs:je,children:[S,e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto p-6",children:[w,f,j]})]}),s[37]=f,s[38]=j,s[39]=A):A=s[39],A}function ue(o){switch(o.toLowerCase()){case"confirmed":return"default";case"pending":return"secondary";case"completed":return"outline";case"cancelled":return"destructive";default:return"secondary"}}function ge(o){o&&Y.get(o,{},{preserveState:!0,preserveScroll:!0})}export{Ye as default};
