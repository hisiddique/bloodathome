import{j as f,c as U}from"./app-Bmo3up5q.js";import{r as i}from"./stripe-DEhpSmJl.js";import{P as j}from"./index-Bb7u4XXV.js";import{c as ue,P as O,b as E,g as C,f as fe}from"./sheet-DYeZ4Q_f.js";import{u as A}from"./button-DzSWANc3.js";import{u as he}from"./index-9OkN_xwD.js";import{c as me}from"./index-BdQq_4o_.js";import{c as G}from"./createLucideIcon-DVqpq5-V.js";import{c as B,f as J}from"./format-Dx8HDyBA.js";import{i as V,a as pe}from"./isSameDay-C7OnRSQZ.js";function K(r){return B(r,Date.now())}function be(r,e){return V(B(r,r),K(r))}function Se(r,e,t){return pe(r,-1,t)}function ve(r,e){return V(B(r,r),Se(K(r)))}function we(r,e){return i.useReducer((t,l)=>e[t][l]??t,r)}var k="ScrollArea",[Q,Je]=ue(k),[ge,v]=Q(k),Z=i.forwardRef((r,e)=>{const{__scopeScrollArea:t,type:l="hover",dir:o,scrollHideDelay:n=600,...s}=r,[c,a]=i.useState(null),[u,d]=i.useState(null),[m,h]=i.useState(null),[p,S]=i.useState(null),[g,x]=i.useState(null),[P,D]=i.useState(0),[X,L]=i.useState(0),[N,_]=i.useState(!1),[H,M]=i.useState(!1),b=A(e,R=>a(R)),w=he(o);return f.jsx(ge,{scope:t,type:l,dir:w,scrollHideDelay:n,scrollArea:c,viewport:u,onViewportChange:d,content:m,onContentChange:h,scrollbarX:p,onScrollbarXChange:S,scrollbarXEnabled:N,onScrollbarXEnabledChange:_,scrollbarY:g,onScrollbarYChange:x,scrollbarYEnabled:H,onScrollbarYEnabledChange:M,onCornerWidthChange:D,onCornerHeightChange:L,children:f.jsx(j.div,{dir:w,...s,ref:b,style:{position:"relative","--radix-scroll-area-corner-width":P+"px","--radix-scroll-area-corner-height":X+"px",...r.style}})})});Z.displayName=k;var ee="ScrollAreaViewport",re=i.forwardRef((r,e)=>{const{__scopeScrollArea:t,children:l,nonce:o,...n}=r,s=v(ee,t),c=i.useRef(null),a=A(e,c,s.onViewportChange);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),f.jsx(j.div,{"data-radix-scroll-area-viewport":"",...n,ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...r.style},children:f.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:l})})]})});re.displayName=ee;var y="ScrollAreaScrollbar",te=i.forwardRef((r,e)=>{const{forceMount:t,...l}=r,o=v(y,r.__scopeScrollArea),{onScrollbarXEnabledChange:n,onScrollbarYEnabledChange:s}=o,c=r.orientation==="horizontal";return i.useEffect(()=>(c?n(!0):s(!0),()=>{c?n(!1):s(!1)}),[c,n,s]),o.type==="hover"?f.jsx(xe,{...l,ref:e,forceMount:t}):o.type==="scroll"?f.jsx(ye,{...l,ref:e,forceMount:t}):o.type==="auto"?f.jsx(oe,{...l,ref:e,forceMount:t}):o.type==="always"?f.jsx(F,{...l,ref:e}):null});te.displayName=y;var xe=i.forwardRef((r,e)=>{const{forceMount:t,...l}=r,o=v(y,r.__scopeScrollArea),[n,s]=i.useState(!1);return i.useEffect(()=>{const c=o.scrollArea;let a=0;if(c){const u=()=>{window.clearTimeout(a),s(!0)},d=()=>{a=window.setTimeout(()=>s(!1),o.scrollHideDelay)};return c.addEventListener("pointerenter",u),c.addEventListener("pointerleave",d),()=>{window.clearTimeout(a),c.removeEventListener("pointerenter",u),c.removeEventListener("pointerleave",d)}}},[o.scrollArea,o.scrollHideDelay]),f.jsx(O,{present:t||n,children:f.jsx(oe,{"data-state":n?"visible":"hidden",...l,ref:e})})}),ye=i.forwardRef((r,e)=>{const{forceMount:t,...l}=r,o=v(y,r.__scopeScrollArea),n=r.orientation==="horizontal",s=I(()=>a("SCROLL_END"),100),[c,a]=we("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return i.useEffect(()=>{if(c==="idle"){const u=window.setTimeout(()=>a("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(u)}},[c,o.scrollHideDelay,a]),i.useEffect(()=>{const u=o.viewport,d=n?"scrollLeft":"scrollTop";if(u){let m=u[d];const h=()=>{const p=u[d];m!==p&&(a("SCROLL"),s()),m=p};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[o.viewport,n,a,s]),f.jsx(O,{present:t||c!=="hidden",children:f.jsx(F,{"data-state":c==="hidden"?"hidden":"visible",...l,ref:e,onPointerEnter:E(r.onPointerEnter,()=>a("POINTER_ENTER")),onPointerLeave:E(r.onPointerLeave,()=>a("POINTER_LEAVE"))})})}),oe=i.forwardRef((r,e)=>{const t=v(y,r.__scopeScrollArea),{forceMount:l,...o}=r,[n,s]=i.useState(!1),c=r.orientation==="horizontal",a=I(()=>{if(t.viewport){const u=t.viewport.offsetWidth<t.viewport.scrollWidth,d=t.viewport.offsetHeight<t.viewport.scrollHeight;s(c?u:d)}},10);return T(t.viewport,a),T(t.content,a),f.jsx(O,{present:l||n,children:f.jsx(F,{"data-state":n?"visible":"hidden",...o,ref:e})})}),F=i.forwardRef((r,e)=>{const{orientation:t="vertical",...l}=r,o=v(y,r.__scopeScrollArea),n=i.useRef(null),s=i.useRef(0),[c,a]=i.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=ae(c.viewport,c.content),d={...l,sizes:c,onSizesChange:a,hasThumb:u>0&&u<1,onThumbChange:h=>n.current=h,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:h=>s.current=h};function m(h,p){return Ae(h,s.current,c,p)}return t==="horizontal"?f.jsx(Pe,{...d,ref:e,onThumbPositionChange:()=>{if(o.viewport&&n.current){const h=o.viewport.scrollLeft,p=q(h,c,o.dir);n.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollLeft=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollLeft=m(h,o.dir))}}):t==="vertical"?f.jsx(Ce,{...d,ref:e,onThumbPositionChange:()=>{if(o.viewport&&n.current){const h=o.viewport.scrollTop,p=q(h,c);n.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollTop=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollTop=m(h))}}):null}),Pe=i.forwardRef((r,e)=>{const{sizes:t,onSizesChange:l,...o}=r,n=v(y,r.__scopeScrollArea),[s,c]=i.useState(),a=i.useRef(null),u=A(e,a,n.onScrollbarXChange);return i.useEffect(()=>{a.current&&c(getComputedStyle(a.current))},[a]),f.jsx(le,{"data-orientation":"horizontal",...o,ref:u,sizes:t,style:{bottom:0,left:n.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:n.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Y(t)+"px",...r.style},onThumbPointerDown:d=>r.onThumbPointerDown(d.x),onDragScroll:d=>r.onDragScroll(d.x),onWheelScroll:(d,m)=>{if(n.viewport){const h=n.viewport.scrollLeft+d.deltaX;r.onWheelScroll(h),de(h,m)&&d.preventDefault()}},onResize:()=>{a.current&&n.viewport&&s&&l({content:n.viewport.scrollWidth,viewport:n.viewport.offsetWidth,scrollbar:{size:a.current.clientWidth,paddingStart:z(s.paddingLeft),paddingEnd:z(s.paddingRight)}})}})}),Ce=i.forwardRef((r,e)=>{const{sizes:t,onSizesChange:l,...o}=r,n=v(y,r.__scopeScrollArea),[s,c]=i.useState(),a=i.useRef(null),u=A(e,a,n.onScrollbarYChange);return i.useEffect(()=>{a.current&&c(getComputedStyle(a.current))},[a]),f.jsx(le,{"data-orientation":"vertical",...o,ref:u,sizes:t,style:{top:0,right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Y(t)+"px",...r.style},onThumbPointerDown:d=>r.onThumbPointerDown(d.y),onDragScroll:d=>r.onDragScroll(d.y),onWheelScroll:(d,m)=>{if(n.viewport){const h=n.viewport.scrollTop+d.deltaY;r.onWheelScroll(h),de(h,m)&&d.preventDefault()}},onResize:()=>{a.current&&n.viewport&&s&&l({content:n.viewport.scrollHeight,viewport:n.viewport.offsetHeight,scrollbar:{size:a.current.clientHeight,paddingStart:z(s.paddingTop),paddingEnd:z(s.paddingBottom)}})}})}),[Ee,ne]=Q(y),le=i.forwardRef((r,e)=>{const{__scopeScrollArea:t,sizes:l,hasThumb:o,onThumbChange:n,onThumbPointerUp:s,onThumbPointerDown:c,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:d,onResize:m,...h}=r,p=v(y,t),[S,g]=i.useState(null),x=A(e,b=>g(b)),P=i.useRef(null),D=i.useRef(""),X=p.viewport,L=l.content-l.viewport,N=C(d),_=C(a),H=I(m,10);function M(b){if(P.current){const w=b.clientX-P.current.left,R=b.clientY-P.current.top;u({x:w,y:R})}}return i.useEffect(()=>{const b=w=>{const R=w.target;S?.contains(R)&&N(w,L)};return document.addEventListener("wheel",b,{passive:!1}),()=>document.removeEventListener("wheel",b,{passive:!1})},[X,S,L,N]),i.useEffect(_,[l,_]),T(S,H),T(p.content,H),f.jsx(Ee,{scope:t,scrollbar:S,hasThumb:o,onThumbChange:C(n),onThumbPointerUp:C(s),onThumbPositionChange:_,onThumbPointerDown:C(c),children:f.jsx(j.div,{...h,ref:x,style:{position:"absolute",...h.style},onPointerDown:E(r.onPointerDown,b=>{b.button===0&&(b.target.setPointerCapture(b.pointerId),P.current=S.getBoundingClientRect(),D.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),M(b))}),onPointerMove:E(r.onPointerMove,M),onPointerUp:E(r.onPointerUp,b=>{const w=b.target;w.hasPointerCapture(b.pointerId)&&w.releasePointerCapture(b.pointerId),document.body.style.webkitUserSelect=D.current,p.viewport&&(p.viewport.style.scrollBehavior=""),P.current=null})})})}),W="ScrollAreaThumb",se=i.forwardRef((r,e)=>{const{forceMount:t,...l}=r,o=ne(W,r.__scopeScrollArea);return f.jsx(O,{present:t||o.hasThumb,children:f.jsx(Re,{ref:e,...l})})}),Re=i.forwardRef((r,e)=>{const{__scopeScrollArea:t,style:l,...o}=r,n=v(W,t),s=ne(W,t),{onThumbPositionChange:c}=s,a=A(e,m=>s.onThumbChange(m)),u=i.useRef(void 0),d=I(()=>{u.current&&(u.current(),u.current=void 0)},100);return i.useEffect(()=>{const m=n.viewport;if(m){const h=()=>{if(d(),!u.current){const p=_e(m,c);u.current=p,c()}};return c(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[n.viewport,d,c]),f.jsx(j.div,{"data-state":s.hasThumb?"visible":"hidden",...o,ref:a,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:E(r.onPointerDownCapture,m=>{const p=m.target.getBoundingClientRect(),S=m.clientX-p.left,g=m.clientY-p.top;s.onThumbPointerDown({x:S,y:g})}),onPointerUp:E(r.onPointerUp,s.onThumbPointerUp)})});se.displayName=W;var $="ScrollAreaCorner",ce=i.forwardRef((r,e)=>{const t=v($,r.__scopeScrollArea),l=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&l?f.jsx(Te,{...r,ref:e}):null});ce.displayName=$;var Te=i.forwardRef((r,e)=>{const{__scopeScrollArea:t,...l}=r,o=v($,t),[n,s]=i.useState(0),[c,a]=i.useState(0),u=!!(n&&c);return T(o.scrollbarX,()=>{const d=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(d),a(d)}),T(o.scrollbarY,()=>{const d=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(d),s(d)}),u?f.jsx(j.div,{...l,ref:e,style:{width:n,height:c,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...r.style}}):null});function z(r){return r?parseInt(r,10):0}function ae(r,e){const t=r/e;return isNaN(t)?0:t}function Y(r){const e=ae(r.viewport,r.content),t=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,l=(r.scrollbar.size-t)*e;return Math.max(l,18)}function Ae(r,e,t,l="ltr"){const o=Y(t),n=o/2,s=e||n,c=o-s,a=t.scrollbar.paddingStart+s,u=t.scrollbar.size-t.scrollbar.paddingEnd-c,d=t.content-t.viewport,m=l==="ltr"?[0,d]:[d*-1,0];return ie([a,u],m)(r)}function q(r,e,t="ltr"){const l=Y(e),o=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=e.scrollbar.size-o,s=e.content-e.viewport,c=n-l,a=t==="ltr"?[0,s]:[s*-1,0],u=me(r,a);return ie([0,s],[0,c])(u)}function ie(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const l=(e[1]-e[0])/(r[1]-r[0]);return e[0]+l*(t-r[0])}}function de(r,e){return r>0&&r<e}var _e=(r,e=()=>{})=>{let t={left:r.scrollLeft,top:r.scrollTop},l=0;return(function o(){const n={left:r.scrollLeft,top:r.scrollTop},s=t.left!==n.left,c=t.top!==n.top;(s||c)&&e(),t=n,l=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(l)};function I(r,e){const t=C(r),l=i.useRef(0);return i.useEffect(()=>()=>window.clearTimeout(l.current),[]),i.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(t,e)},[t,e])}function T(r,e){const t=C(e);fe(()=>{let l=0;if(r){const o=new ResizeObserver(()=>{cancelAnimationFrame(l),l=window.requestAnimationFrame(t)});return o.observe(r),()=>{window.cancelAnimationFrame(l),o.unobserve(r)}}},[r,t])}var je=Z,De=re,Le=ce;function Ne(r){const e=U.c(14);let t,l,o;e[0]!==r?({className:l,children:t,...o}=r,e[0]=r,e[1]=t,e[2]=l,e[3]=o):(t=e[1],l=e[2],o=e[3]);let n;e[4]!==l?(n=G("relative overflow-hidden",l),e[4]=l,e[5]=n):n=e[5];let s;e[6]!==t?(s=f.jsx(De,{className:"h-full w-full rounded-[inherit]",children:t}),e[6]=t,e[7]=s):s=e[7];let c,a;e[8]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsx(He,{}),a=f.jsx(Le,{}),e[8]=c,e[9]=a):(c=e[8],a=e[9]);let u;return e[10]!==o||e[11]!==n||e[12]!==s?(u=f.jsxs(je,{"data-slot":"scroll-area",className:n,...o,children:[s,c,a]}),e[10]=o,e[11]=n,e[12]=s,e[13]=u):u=e[13],u}function He(r){const e=U.c(13);let t,l,o;e[0]!==r?({className:t,orientation:o,...l}=r,e[0]=r,e[1]=t,e[2]=l,e[3]=o):(t=e[1],l=e[2],o=e[3]);const n=o===void 0?"vertical":o,s=n==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",c=n==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]";let a;e[4]!==t||e[5]!==s||e[6]!==c?(a=G("flex touch-none select-none transition-colors",s,c,t),e[4]=t,e[5]=s,e[6]=c,e[7]=a):a=e[7];let u;e[8]===Symbol.for("react.memo_cache_sentinel")?(u=f.jsx(se,{className:"relative flex-1 rounded-full bg-border"}),e[8]=u):u=e[8];let d;return e[9]!==n||e[10]!==l||e[11]!==a?(d=f.jsx(te,{"data-slot":"scroll-bar",orientation:n,className:a,...l,children:u}),e[9]=n,e[10]=l,e[11]=a,e[12]=d):d=e[12],d}function Me(r){const e=[];return r.forEach(t=>{const l=new Date(t.created_at),o=e.find(n=>V(n.date,l));o?o.messages.push(t):e.push({date:l,messages:[t]})}),e}function We(r){return be(r)?"Today":ve(r)?"Yesterday":J(r,"MMMM d, yyyy")}function Ke(r){const e=U.c(20),{messages:t,emptyMessage:l,className:o}=r,n=l===void 0?"No messages yet. Start a conversation!":l,s=i.useRef(null);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},e[0]=c):c=e[0];let a;if(e[1]!==t?(a=[t],e[1]=t,e[2]=a):a=e[2],i.useEffect(c,a),t.length===0){let x;return e[3]!==n?(x=f.jsx("div",{className:"flex h-full flex-col items-center justify-center text-center",children:f.jsx("p",{className:"text-muted-foreground",children:n})}),e[3]=n,e[4]=x):x=e[4],x}let u,d,m,h,p;if(e[5]!==o||e[6]!==t){const x=Me(t);u=Ne,h=o,p=s,d="space-y-6 p-4",m=x.map(ze),e[5]=o,e[6]=t,e[7]=u,e[8]=d,e[9]=m,e[10]=h,e[11]=p}else u=e[7],d=e[8],m=e[9],h=e[10],p=e[11];let S;e[12]!==d||e[13]!==m?(S=f.jsx("div",{className:d,children:m}),e[12]=d,e[13]=m,e[14]=S):S=e[14];let g;return e[15]!==u||e[16]!==h||e[17]!==p||e[18]!==S?(g=f.jsx(u,{className:h,ref:p,children:S}),e[15]=u,e[16]=h,e[17]=p,e[18]=S,e[19]=g):g=e[19],g}function ze(r,e){return f.jsxs("div",{children:[f.jsx("div",{className:"mb-4 flex justify-center",children:f.jsx("span",{className:"rounded-full bg-muted px-3 py-1 text-xs text-muted-foreground",children:We(r.date)})}),f.jsx("div",{className:"space-y-4",children:r.messages.map(Oe)})]},e)}function Oe(r){return f.jsx("div",{className:`flex ${r.is_from_current_user?"justify-end":"justify-start"}`,children:f.jsxs("div",{className:`max-w-[70%] rounded-lg px-4 py-2 ${r.is_from_current_user?"bg-primary text-primary-foreground":"bg-muted"}`,children:[f.jsx("p",{className:"text-sm",children:r.content}),f.jsx("p",{className:`mt-1 text-xs ${r.is_from_current_user?"text-primary-foreground/70":"text-muted-foreground"}`,children:J(new Date(r.created_at),"h:mm a")})]})},r.id)}export{Ke as M};
