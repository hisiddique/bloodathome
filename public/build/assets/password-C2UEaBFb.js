import{c as S,j as r,F as C,H as P}from"./app-DKMZLzfm.js";import{q as v}from"./index-CMWG4mbA.js";import{I as y}from"./input-error-D07r88D_.js";import{A as q,e as k}from"./app-layout-mDgHwkxe.js";import{S as I}from"./layout-C01XYFEV.js";import{r as b}from"./stripe-DEhpSmJl.js";import{H as D}from"./heading-small-CjPJGBP7.js";import{B as g}from"./button-BpuFCFGL.js";import{f as T,d as L,e as A,g as H,D as R,b as O,c as U}from"./dialog-Cz8pX6eT.js";import{I as w}from"./input-aT928qqq.js";import{L as x}from"./label-CLkqaWUk.js";import{z as $}from"./transition-BvpGH0N8.js";/* empty css            */import"./mapbox-fioGkFd4.js";import"./sheet-COscS31w.js";import"./x-CVwgNE2J.js";import"./index--92RBgGL.js";import"./index-B_ybs1te.js";import"./index-Cns2SMks.js";import"./index-CO8lL1Hs.js";import"./index-DAEGULsz.js";import"./clock-Br7JvzSP.js";import"./map-pin-6HZ9aDy_.js";import"./message-circle-BH8WnjW2.js";import"./separator-v5K6XPOP.js";import"./index-B3vMSVka.js";const s=e=>({url:s.url(e),method:"get"});s.definition={methods:["get","head"],url:"/settings/password"};s.url=e=>s.definition.url+v(e);s.get=e=>({url:s.url(e),method:"get"});s.head=e=>({url:s.url(e),method:"head"});const N=e=>({action:s.url(e),method:"get"});N.get=e=>({action:s.url(e),method:"get"});N.head=e=>({action:s.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});s.form=N;const t=e=>({url:t.url(e),method:"put"});t.definition={methods:["put"],url:"/settings/password"};t.url=e=>t.definition.url+v(e);t.put=e=>({url:t.url(e),method:"put"});const E=e=>({action:t.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...e?.query??e?.mergeQuery??{}}}),method:"post"});E.put=e=>({action:t.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...e?.query??e?.mergeQuery??{}}}),method:"post"});t.form=E;const z={update:t},o=e=>({url:o.url(e),method:"delete"});o.definition={methods:["delete"],url:"/settings/profile"};o.url=e=>o.definition.url+v(e);o.delete=e=>({url:o.url(e),method:"delete"});const Q=e=>({action:o.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});Q.delete=e=>({action:o.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});o.form=Q;const B={destroy:o};function W(){const e=S.c(9),h=b.useRef(null);let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(D,{title:"Delete account",description:"Delete your account and all of its resources"}),e[0]=p):p=e[0];let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsxs("div",{className:"relative space-y-0.5 text-red-600 dark:text-red-100",children:[r.jsx("p",{className:"font-medium",children:"Warning"}),r.jsx("p",{className:"text-sm",children:"Please proceed with caution, this cannot be undone."})]}),e[1]=a):a=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(R,{asChild:!0,children:r.jsx(g,{variant:"destructive","data-test":"delete-user-button",children:"Delete account"})}),e[2]=l):l=e[2];let n,d;e[3]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx(O,{children:"Are you sure you want to delete your account?"}),d=r.jsx(U,{children:"Once your account is deleted, all of its resources and data will also be permanently deleted. Please enter your password to confirm you would like to permanently delete your account."}),e[3]=n,e[4]=d):(n=e[3],d=e[4]);let i,c,m;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=B.destroy.form(),c={preserveScroll:!0},m=()=>h.current?.focus(),e[5]=i,e[6]=c,e[7]=m):(i=e[5],c=e[6],m=e[7]);let u;return e[8]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsxs("div",{className:"space-y-6",children:[p,r.jsxs("div",{className:"space-y-4 rounded-lg border border-red-100 bg-red-50 p-4 dark:border-red-200/10 dark:bg-red-700/10",children:[a,r.jsxs(T,{children:[l,r.jsxs(L,{children:[n,d,r.jsx(C,{...i,options:c,onError:m,resetOnSuccess:!0,className:"space-y-6",children:f=>{const{resetAndClearErrors:j,processing:_,errors:F}=f;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid gap-2",children:[r.jsx(x,{htmlFor:"password",className:"sr-only",children:"Password"}),r.jsx(w,{id:"password",type:"password",name:"password",ref:h,placeholder:"Password",autoComplete:"current-password"}),r.jsx(y,{message:F.password})]}),r.jsxs(A,{className:"gap-2",children:[r.jsx(H,{asChild:!0,children:r.jsx(g,{variant:"secondary",onClick:()=>j(),children:"Cancel"})}),r.jsx(g,{variant:"destructive",disabled:_,asChild:!0,children:r.jsx("button",{type:"submit","data-test":"confirm-delete-user-button",children:"Delete account"})})]})]})}})]})]})]})]}),e[8]=u):u=e[8],u}const G=[{title:"Password settings",href:k().url}];function xe(){const e=S.c(7),h=b.useRef(null),p=b.useRef(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(P,{title:"Password settings"}),e[0]=a):a=e[0];let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(D,{title:"Update password",description:"Ensure your account is using a long, random password to stay secure"}),e[1]=l):l=e[1];let n,d,i;e[2]===Symbol.for("react.memo_cache_sentinel")?(n=z.update.form(),d={preserveScroll:!0},i=["password","password_confirmation","current_password"],e[2]=n,e[3]=d,e[4]=i):(n=e[2],d=e[3],i=e[4]);let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=u=>{u.password&&h.current?.focus(),u.current_password&&p.current?.focus()},e[5]=c):c=e[5];let m;return e[6]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsxs(q,{breadcrumbs:G,children:[a,r.jsxs(I,{children:[r.jsxs("div",{className:"space-y-6",children:[l,r.jsx(C,{...n,options:d,resetOnError:i,resetOnSuccess:!0,onError:c,className:"space-y-6",children:u=>{const{errors:f,processing:j,recentlySuccessful:_}=u;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid gap-2",children:[r.jsx(x,{htmlFor:"current_password",children:"Current password"}),r.jsx(w,{id:"current_password",ref:p,name:"current_password",type:"password",className:"mt-1 block w-full",autoComplete:"current-password",placeholder:"Current password"}),r.jsx(y,{message:f.current_password})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(x,{htmlFor:"password",children:"New password"}),r.jsx(w,{id:"password",ref:h,name:"password",type:"password",className:"mt-1 block w-full",autoComplete:"new-password",placeholder:"New password"}),r.jsx(y,{message:f.password})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(x,{htmlFor:"password_confirmation",children:"Confirm password"}),r.jsx(w,{id:"password_confirmation",name:"password_confirmation",type:"password",className:"mt-1 block w-full",autoComplete:"new-password",placeholder:"Confirm password"}),r.jsx(y,{message:f.password_confirmation})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(g,{disabled:j,"data-test":"update-password-button",children:"Save password"}),r.jsx($,{show:_,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:r.jsx("p",{className:"text-sm text-neutral-600",children:"Saved"})})]})]})}})]}),r.jsx(W,{})]})]}),e[6]=m):m=e[6],m}export{xe as default};
