import{c as b,j as t,H as g}from"./app-DKMZLzfm.js";import{C as j,a as _,b as C,c as v}from"./card-Ct3FmLMH.js";import{I as y}from"./input-aT928qqq.js";import{C as N}from"./conversation-list-Bf9p5HHB.js";import{r as S}from"./stripe-DEhpSmJl.js";import{A as w}from"./app-layout-mDgHwkxe.js";import{M}from"./message-circle-BH8WnjW2.js";import{S as I}from"./search-CYN13Cpu.js";/* empty css            */import"./mapbox-fioGkFd4.js";import"./button-BpuFCFGL.js";import"./badge-0S-twSfP.js";import"./format-BqGRHkU_.js";import"./sheet-COscS31w.js";import"./x-CVwgNE2J.js";import"./index--92RBgGL.js";import"./index-B_ybs1te.js";import"./index-Cns2SMks.js";import"./index-CO8lL1Hs.js";import"./index-DAEGULsz.js";import"./index-CMWG4mbA.js";import"./clock-Br7JvzSP.js";import"./map-pin-6HZ9aDy_.js";const L=[{title:"Messages",href:"/chat"}];function te(s){const e=b.c(16),{conversations:u}=s,x=u===void 0?[]:u,[r,f]=S.useState("");let l;e[0]!==r?(l=h=>h.phlebotomist_name.toLowerCase().includes(r.toLowerCase()),e[0]=r,e[1]=l):l=e[1];const m=x.filter(l).map(E);let n;e[2]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(g,{title:"Messages"}),e[2]=n):n=e[2];let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Messages"}),t.jsx("p",{className:"text-muted-foreground",children:"Chat with your phlebotomists"})]}),e[3]=c):c=e[3];let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx(I,{className:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),e[4]=p):p=e[4];let a;e[5]!==f?(a=h=>f(h.target.value),e[5]=f,e[6]=a):a=e[6];let o;e[7]!==r||e[8]!==a?(o=t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"relative",children:[p,t.jsx(y,{type:"search",placeholder:"Search conversations...",value:r,onChange:a,className:"pl-10"})]})}),e[7]=r,e[8]=a,e[9]=o):o=e[9];let i;e[10]!==m||e[11]!==r?(i=m.length===0?t.jsx(j,{children:t.jsxs(_,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(M,{className:"mb-4 size-16 text-muted-foreground"}),t.jsx(C,{className:"mb-2",children:r?"No conversations found":"No messages yet"}),t.jsx(v,{children:r?"Try a different search term":"Your conversations with phlebotomists will appear here"})]})}):t.jsx(N,{conversations:m,basePath:"/chat"}),e[10]=m,e[11]=r,e[12]=i):i=e[12];let d;return e[13]!==o||e[14]!==i?(d=t.jsxs(w,{breadcrumbs:L,children:[n,t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto p-4",children:[c,o,i]})]}),e[13]=o,e[14]=i,e[15]=d):d=e[15],d}function E(s){return{id:s.id,name:s.phlebotomist_name,avatar:s.phlebotomist_image,last_message:{content:s.last_message.content,created_at:s.last_message.created_at,is_from_current_user:s.last_message.is_from_patient},unread_count:s.unread_count,booking_id:s.booking_id}}export{te as default};
